# https://kamailio.org/docs/tutorials/6.0.x/kamailio-install-guide-git/#prerequisites
# Installing---------------------------------------

wget https://github.com/kamailio/kamailio/archive/refs/tags/6.0.1.tar.gz
tar -x -zf 6.0.1.tar.gz

apt-get install gcc g++ flex bison libmysqlclient-dev -y
apt-get install mysql-server -y

cd kamailio-6.0.1/
make cfg
# make include_modules="db_mysql dialplan tls" cfg
vim src/modules.lst
#  include_modules= db_mysql dialplan tls

make all
make install
make install-systemd-debian

# Configuring---------------------------------------
# --- Database
# https://dev.mysql.com/doc/mysql-getting-started/en/

mysql_secure_installation
mysql -u root -p
# ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';

vi /usr/local/etc/kamailio/kamctlrc
# DBENGINE=MYSQL
# DBHOST=localhost
# DBPORT=3306
# DBNAME=kamailio
# DBRWUSER="kamailio"
# DBRWPW="kamailiorw"
/usr/local/sbin/kamdbctl create

# --- Kamailio
vi /usr/local/etc/kamailio/kamailio.cfg

